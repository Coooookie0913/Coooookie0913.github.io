<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    <meta name="description" content="This cookie tastes sweet!">
    <meta name="author" content="Coooookie">
    
    <title>
        
            P2 |
        
        Coooookie&#39;s Blog
    </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/cookie.png">
    
<link rel="stylesheet" href="/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/css/brands.min.css">

    
<link rel="stylesheet" href="/css/solid.min.css">

    
<link rel="stylesheet" href="/css/regular.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/css2.css">

    <script id="hexo-configurations">
    let REDEFINE = window.REDEFINE || {};
    REDEFINE.hexo_config = {"hostname":"coooookie0913.github.io","root":"/","language":"en","path":"search.xml"};
    REDEFINE.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#005080","avatar":"/images/cookie.png","favicon":"/images/cookie.png","article_img_align":"center","right_side_width":"210px","content_max_width":"1000px","nav_color":{"left":"#f78736","right":"#367df7","transparency":35},"hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_image":{"light":"https://evan.beee.top/img/wallhaven-wqery6-light.webp","dark":"https://evan.beee.top/img/wallhaven-wqery6-dark.webp"},"title_color":{"light":"#fff","dark":"#d1d1b6"},"description":"Coooookie's Blog"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_block":{"copy":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"0.4.5","friend_links":{"columns":3}};
    REDEFINE.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">
    
    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Coooookie&#39;s Blog
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/" >
                                
                                    
                                        <i class="fa-regular fa-house"></i>
                                    
                                    HOME
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/archives" >
                                
                                    
                                        <i class="fa-regular fa-archive"></i>
                                    
                                    ARCHIVES
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/tags" >
                                
                                    
                                    TAGS
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/about" >
                                
                                    
                                    ABOUT
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/categories" >
                                
                                    
                                    CATEGORIES
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                        <li class="menu-item">
                            <!-- Menu -->
                            <a class="" 
                                href="/links" >
                                
                                    
                                    LINKS
                                
                            </a>
                            <!-- Submenu -->
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/" >
                         
                            
                                <i class="fa-regular fa-house"></i>
                            
                            HOME
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/archives" >
                         
                            
                                <i class="fa-regular fa-archive"></i>
                            
                            ARCHIVES
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/tags" >
                         
                            
                            TAGS
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/about" >
                         
                            
                            ABOUT
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/categories" >
                         
                            
                            CATEGORIES
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
                <li class="drawer-menu-item flex-center">
                    <a class="" 
                       href="/links" >
                         
                            
                            LINKS
                        
                    </a>
                </li>
                <!-- Submenu -->
                
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">
            <div class="article-title">
                <span class="title-hover-animation"><h1 style="font-size:2rem; font-weight: bold; margin: 10px 0;">P2</h1></span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/cookie.png">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Coooookie</span>
                            
                                <span class="author-label">hahah</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="pc">2023-01-02 20:29:45</span>
        <span class="mobile">2023-01-02 20:29</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/BUAA-CO/">BUAA_CO</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/BUAA-CO/">BUAA_CO</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="P2-Study"><a href="#P2-Study" class="headerlink" title="P2_Study"></a>P2_Study</h1><h2 id="MIPS教程-amp-大黑书学习"><a href="#MIPS教程-amp-大黑书学习" class="headerlink" title="MIPS教程&amp;大黑书学习"></a>MIPS教程&amp;大黑书学习</h2><h3 id="常用寄存器"><a href="#常用寄存器" class="headerlink" title="常用寄存器"></a>常用寄存器</h3><ol>
<li>寄存器使用规范</li>
</ol>
<p><img lazyload src="/images/loading.svg" data-src="/./P2/%E5%AF%84%E5%AD%98%E5%99%A8%E4%BD%BF%E7%94%A8%E8%A7%84%E8%8C%83.jpg" alt="1"> </p>
<ol start="2">
<li><strong>注意</strong><br>在输入输出的系统调用时，会涉及对于<code>$a0</code>和<code>$v0</code>寄存器的值的改变，尤其是对于<code>$a0</code>寄存器<br>要么在主程序中避免使用（比如从<code>$a1</code>开始保存参数）<br>要么在系统调用时对于<code>$a0</code>寄存器进行保护<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保护示例</span></span><br><span class="line"><span class="meta">.macro</span> ptintInt(%src)</span><br><span class="line">  push($<span class="built_in">a0</span>) <span class="comment"># push</span></span><br><span class="line">  <span class="keyword">add </span>$<span class="built_in">a0</span>,%src,$<span class="built_in">zero</span></span><br><span class="line">  li $<span class="built_in">v0</span>,<span class="number">1</span></span><br><span class="line">  <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>  pop($<span class="built_in">a0</span>) <span class="comment"># pop</span></span><br><span class="line">.end_macro</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><ol>
<li>算术指令<br>① <code>addi add subi sub</code><br>② <code>mult</code>(低32位存入LO寄存器，高32位存入HI寄存器)<br><code>div</code>（商存入LO寄存器，余数存入HI寄存器）<br>③ <code>sll</code> (逻辑左移) <code>srl</code>(逻辑右移) <code>sra</code>（算术右移）</li>
<li>分支指令<br>① 条件分支<br>b开头的一系列指令（可以根据Mars的提示来使用）<br>需要注意的是，跳转过去之后不会返回原地址的下一条，直接跑了<br>② 跳转指令<br><code>j</code> 无条件跳转到相应标号，不返回<br><code>jal</code> 跳转与链接，跳转到相应标号并保存返回地址（可与jr $ra配合使用）<br><code>jr</code> 跳转寄存器指令，跳转到寄存器所保存的地址</li>
<li>存取指令<br>① <code>sw</code>与<code>lw</code>指令，以字为单位（4Byte）进行存取，每次存取32位<br>② <code>sb</code>与<code>lb</code>指令，以字节为单位（1Byte）进行存取<br><code>lbu</code>：将相应地址的字节（8位）装入寄存器的最低有效字节，并用0填充寄存器的剩下字节<br><code>lb</code>：同lbu，不过最后是使用符号扩展来填充寄存器的剩下字节<br><code>sb</code>：将寄存器的最低有效字节存储到指定地址字节<br>因为MIPS本就是以字节为单位操作的，所以每次对于字节操作，移位只用以1为单位即可<br>来点栗子：<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># $s0 = base addr of chararray $s1 = i</span></span><br><span class="line">   <span class="keyword">addi </span>$<span class="built_in">s1</span>,$<span class="built_in">zero</span>,<span class="number">0</span> <span class="comment"># i = 0</span></span><br><span class="line">   <span class="keyword">addi </span>$<span class="built_in">t0</span>,$<span class="built_in">zero</span>,<span class="number">10</span> <span class="comment"># t0 = 10</span></span><br><span class="line"><span class="symbol">loop:</span></span><br><span class="line">   <span class="keyword">beq </span>$<span class="built_in">s1</span>,$<span class="built_in">t0</span>,done <span class="comment"># i = 10,exit loop</span></span><br><span class="line">   <span class="keyword">add </span>$<span class="built_in">t1</span>,$<span class="built_in">s0</span>,$<span class="built_in">s1</span> <span class="comment"># t1 = index = addr0 + i</span></span><br><span class="line">   <span class="keyword">lb </span>$<span class="built_in">t2</span>,<span class="number">0</span>($<span class="built_in">t1</span>) <span class="comment"># t2 = array[i]</span></span><br><span class="line">   <span class="keyword">addi </span>$<span class="built_in">t2</span>,$<span class="built_in">t2</span>,-<span class="number">32</span> <span class="comment"># xiaoxie -&gt; daxie</span></span><br><span class="line">   <span class="keyword">sb </span>$<span class="built_in">t2</span>,<span class="number">0</span>($<span class="built_in">t1</span>) <span class="comment"># store the new value</span></span><br><span class="line">   <span class="keyword">addi </span>$<span class="built_in">s1</span>,$<span class="built_in">s1</span>,<span class="number">1</span> <span class="comment"># i++</span></span><br><span class="line">   <span class="keyword">j </span>loop </span><br><span class="line"><span class="symbol">done:</span></span><br><span class="line">   <span class="comment"># ......</span></span><br></pre></td></tr></table></figure></div></li>
</ol>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><ol>
<li>新建数组<br>注意.word与.space的区别，这里直接上评论区同学的总结<br><img lazyload src="/images/loading.svg" data-src="/./P2/.word&.space1.jpg" alt="1"><br><img lazyload src="/images/loading.svg" data-src="/./P2/.word&.space2.jpg" alt="1"></li>
<li>数组访问<br>注意以字为单位（int）每次移位4，以字节为单位（char）每次移位1<br>利用lb&#x2F;lbu sb lw sw 等指令实现对数组的访问和改变</li>
</ol>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a><strong>函数调用</strong></h3><p><strong>大黑书P200-P206讲得很清楚</strong></p>
<ol>
<li>函数调用与返回<br>MIPS使用jal来调用一个函数，使用jr指令从函数返回<br>jal完成两种功能：<br>①将下一条指令（jal后面的那条指令）的地址存储到寄存器$ra中<br>②跳转到目标指令<br>jr：跳转到寄存器保存的地址<br>来点栗子：<br>不涉及传参的函数<br><img lazyload src="/images/loading.svg" data-src="/./P2/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8sample.jpg" alt="1"><br>带有传参和函数返回值的函数<br><img lazyload src="/images/loading.svg" data-src="/./P2/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8sample2.jpg" alt="1"></li>
<li>寄存器保护<br>函数调用前后要注意保存和维护寄存器，避免被调用函数改变寄存器的值而对调用者产生影响<br>① <code>$s0</code><del><code>$s7</code> 保存局部变量时，要保护（就是调用者用到了而且调用函数可能改变的寄存器都要保护）<br>② <code>$ra</code> 要保护，这样才能知道函数返回哪里<br>③ <code>$v0</code></del><code>$v1</code> 不用保护，因为函数要将返回结果（如果有的话）存入这些寄存器中<br>利用栈来保护寄存器，使用push和pop操作</li>
<li>递归函数调用<br><strong>保护好寄存器！！！</strong><br><img lazyload src="/images/loading.svg" data-src="/./P2/%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8.jpg" alt="1"></li>
<li>栈的使用<br><img lazyload src="/images/loading.svg" data-src="/./P2/%E6%A0%88%E7%9A%84%E4%BD%BF%E7%94%A8.jpg" alt="1"></li>
</ol>
<h2 id="板子"><a href="#板子" class="headerlink" title="板子"></a>板子</h2><ol>
<li>print<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.macro</span>  printInt(%src)</span><br><span class="line">     <span class="keyword">add </span>$<span class="built_in">a0</span>,%src,$<span class="built_in">zero</span></span><br><span class="line">     li $<span class="built_in">v0</span>,<span class="number">1</span></span><br><span class="line">     <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>.end_macro</span><br><span class="line"></span><br><span class="line"><span class="meta">.macro</span> printStr(%src)</span><br><span class="line">     la $<span class="built_in">a0</span>,%src <span class="comment"># load label</span></span><br><span class="line">     li $<span class="built_in">v0</span>,<span class="number">4</span></span><br><span class="line">     <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span> .end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>get<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.macro</span> getInt(%des)</span><br><span class="line">     li $<span class="built_in">v0</span>,<span class="number">5</span></span><br><span class="line">     <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>     <span class="keyword">add </span>%des,$<span class="built_in">v0</span>,$<span class="built_in">zero</span></span><br><span class="line">.end_macro</span><br><span class="line"></span><br><span class="line"><span class="meta">.macro</span> getChar(%des)</span><br><span class="line">     li $<span class="built_in">v0</span>,<span class="number">12</span></span><br><span class="line">     <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>     <span class="keyword">add </span>%des,$<span class="built_in">v0</span>,$<span class="built_in">zero</span></span><br><span class="line">.end_macro</span><br><span class="line"></span><br><span class="line"><span class="meta">.macro</span> getStr(%des) <span class="comment"># contains &#x27;\n&#x27;</span></span><br><span class="line">     li $<span class="built_in">v0</span>,<span class="number">8</span></span><br><span class="line">     <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>     <span class="keyword">add </span>%des,$<span class="built_in">a0</span>,$<span class="built_in">zero</span></span><br><span class="line">.end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>load from array<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.macro</span> loadChar(%i,%array,%des)</span><br><span class="line">     <span class="keyword">lb </span>%des,%array(%i)</span><br><span class="line">.end_macro</span><br><span class="line"></span><br><span class="line"><span class="meta">.macro</span> loadInt(%i,%<span class="keyword">j,%n,%array,%des)</span></span><br><span class="line"><span class="keyword"></span>    <span class="keyword">mult </span>%i,%n</span><br><span class="line">    <span class="keyword">mflo </span>$<span class="built_in">t9</span></span><br><span class="line">    <span class="keyword">add </span>$<span class="built_in">t9</span>,$<span class="built_in">t9</span>,%<span class="keyword">j</span></span><br><span class="line"><span class="keyword"></span>    <span class="keyword">sll </span>$<span class="built_in">t9</span>,$<span class="built_in">t9</span>,<span class="number">2</span></span><br><span class="line">    <span class="keyword">lw </span>%ans,%array($<span class="built_in">t9</span>)</span><br><span class="line">.end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>store to array<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.macro</span> storeInt(%i,%<span class="keyword">j,%n,%array,%src) </span><span class="comment"># n is rows </span></span><br><span class="line">     <span class="keyword">mult </span>%i,%n</span><br><span class="line">     <span class="keyword">mflo </span>$<span class="built_in">t9</span></span><br><span class="line">     <span class="keyword">add </span>$<span class="built_in">t9</span>,$<span class="built_in">t9</span>,%<span class="keyword">j</span></span><br><span class="line"><span class="keyword"></span>     <span class="keyword">sll </span>$<span class="built_in">t9</span>,$<span class="built_in">t9</span>,<span class="number">2</span></span><br><span class="line">     <span class="keyword">sw </span>%src,%array($<span class="built_in">t9</span>)</span><br><span class="line">.end_macro</span><br><span class="line"></span><br><span class="line"><span class="meta">.macro</span> storeChar(%i,%array,%src)</span><br><span class="line">     <span class="keyword">sb </span>%src,%array(%i)</span><br><span class="line">.end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>push<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.macro</span> push(%src)</span><br><span class="line">   <span class="keyword">sw </span>%src,<span class="number">0</span>($<span class="built_in">sp</span>)</span><br><span class="line">   <span class="keyword">subi </span>$<span class="built_in">sp</span>,$<span class="built_in">sp</span>,<span class="number">4</span></span><br><span class="line">.end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>pop<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">.macro</span> pop(%src)</span><br><span class="line">      <span class="keyword">addi </span>$<span class="built_in">sp</span>,$<span class="built_in">sp</span>,<span class="number">4</span></span><br><span class="line">      <span class="keyword">lw </span>%src,<span class="number">0</span>($<span class="built_in">sp</span>)</span><br><span class="line">   .end_macro</span><br><span class="line"><span class="number">7</span>. end</span><br><span class="line">   ```MIPS</span><br><span class="line">   <span class="meta">.macro</span> end</span><br><span class="line">      li $<span class="built_in">v0</span>,<span class="number">10</span></span><br><span class="line">      <span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span>   .end_macro</span><br></pre></td></tr></table></figure></div></li>
<li>if-else<br>利用b类指令实现if-else的跳转，注意执行完每个块最后也要跳转，否则顺序执行</li>
<li>for<br>设置循环变量，利用b类指令实现跳转，一定不要忘记i++和最后跳回去</li>
</ol>
<h2 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h2><ol>
<li>写循环的时候写成死循环——忘记判断跳出循环的指令（一般放在loop开头的b类指令）；<br>忘记最后循环变量的自增操作</li>
<li>寄存器写错，比如<code>$s1</code>写成<code>$1</code>；<br>寄存器对应错误（注意自己每个寄存器保存什么变量以及注意提示C代码中的变量与实际程序中的变量可能有区别）</li>
</ol>
<h2 id="P2教程"><a href="#P2教程" class="headerlink" title="P2教程"></a>P2教程</h2><h3 id="矩阵乘法"><a href="#矩阵乘法" class="headerlink" title="矩阵乘法"></a>矩阵乘法</h3><p>考察循环使用，就是多个循环实现读取和计算</p>
<h3 id="回文串判断"><a href="#回文串判断" class="headerlink" title="回文串判断"></a>回文串判断</h3><p>简单的c程序翻译就好，需要注意的是利用$v0 &#x3D; 12来读入字符（$v0 &#x3D; 8会读入行尾换行符，不知道为啥，就这样吧）</p>
<h3 id="卷积运算"><a href="#卷积运算" class="headerlink" title="卷积运算"></a>卷积运算</h3><p>矩阵乘法plus版，临时寄存器的使用有点多，注意勿混</p>
<h3 id="全排列"><a href="#全排列" class="headerlink" title="全排列"></a>全排列</h3><p>先上C代码  </p>
<p><img lazyload src="/images/loading.svg" data-src="/./P2/%E5%85%A8%E6%8E%92%E5%88%97c.jpg" alt="1"><br><strong>注意</strong> 递归调用一定要保护好递归前后的变量!!!</p>
<div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   #</span><br><span class="line">   push($<span class="built_in">ra</span>) <span class="comment"># can also at the beginning</span></span><br><span class="line">   push($<span class="built_in">a1</span>)</span><br><span class="line">   push($<span class="built_in">t0</span>)</span><br><span class="line">   <span class="keyword">addi </span>$<span class="built_in">a1</span>,$<span class="built_in">a1</span>,<span class="number">1</span> <span class="comment"># index = index+1</span></span><br><span class="line">   <span class="keyword">jal </span>FullArray <span class="comment">###</span></span><br><span class="line">   pop($<span class="built_in">t0</span>)</span><br><span class="line">   pop($<span class="built_in">a1</span>)</span><br><span class="line">   pop($<span class="built_in">ra</span>) <span class="comment"># can also at the return</span></span><br><span class="line">   #</span><br><span class="line"><span class="symbol">return:</span></span><br><span class="line">   <span class="keyword">jr </span>$<span class="built_in">ra</span></span><br></pre></td></tr></table></figure></div>
<h3 id="迷宫"><a href="#迷宫" class="headerlink" title="迷宫"></a>迷宫</h3><ol>
<li>不确定是否要保护的寄存器，只要递归前后涉及改变就push和pop</li>
<li>注意递归前后某个数组变量的置0和置1</li>
</ol>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><ol>
<li>多写注释，利用好宏</li>
<li>水仙花数，汉诺塔，约瑟夫环等等，多练习</li>
<li>认真认真！</li>
</ol>
<h1 id="P2上机加油！冲！"><a href="#P2上机加油！冲！" class="headerlink" title="P2上机加油！冲！"></a>P2上机加油！冲！</h1><h1 id="P2-Review"><a href="#P2-Review" class="headerlink" title="P2_Review"></a>P2_Review</h1><h2 id="匹配子串"><a href="#匹配子串" class="headerlink" title="匹配子串"></a>匹配子串</h2><ol>
<li>读取字符串  <div class="highlight-container" data-rel="Mips"><figure class="iseeu highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">la $<span class="built_in">a0</span>,array <span class="comment"># the addr of the str</span></span><br><span class="line">li $<span class="built_in">a1</span>,<span class="number">200</span> <span class="comment"># the maxsize of the str is n-1</span></span><br><span class="line">li $<span class="built_in">v0</span>,<span class="number">8</span></span><br><span class="line"><span class="keyword">syscall</span></span><br></pre></td></tr></table></figure></div>
需要注意的是，这里的$a1存的是字符串的最长长度，读到\n停止<br>想要得到字符串的实际长度，需要手搓strlen  </li>
<li>判断是否匹配完子串，因为这里未知子串长度，所以用最后s2[j]是否为’\n’来判断比较好（但不知道为什么T了一个点，最后又设置了一个比较字符串上限的限制就过了）</li>
</ol>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><ol>
<li>翻译c代码，没啥好说的</li>
<li>小错误：比如，$t5写成$5，$s3写成$a3等等</li>
<li>需要注意n可能为0，这里直接结束程序，示例c代码并没有给出相应处理，不过T的是第一个点，自己试一下也就知道了</li>
</ol>
<h1 id="P2结束啦！再接再厉！"><a href="#P2结束啦！再接再厉！" class="headerlink" title="P2结束啦！再接再厉！"></a>P2结束啦！再接再厉！</h1>
            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li>Post title：P2</li>
        <li>Post author：Coooookie</li>
        <li>Create time：2023-01-02 20:29:45</li>
        <li>
            Post link：https://coooookie0913.github.io/2023/01/02/P2/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/BUAA-CO/">#BUAA_CO</a>&nbsp;
                        </li>
                    
                </ul>
            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/01/02/P3/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">P3</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/01/02/P1/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">P1</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div style="font-size: 1.3rem;margin-top: 0; margin-bottom: 0.8rem; transition-duration: 0.1s;"><i class="fa-solid fa-list"></i> <strong>Contents</strong></div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#P2-Study"><span class="nav-text">P2_Study</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MIPS%E6%95%99%E7%A8%8B-amp-%E5%A4%A7%E9%BB%91%E4%B9%A6%E5%AD%A6%E4%B9%A0"><span class="nav-text">MIPS教程&amp;大黑书学习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">常用寄存器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="nav-text">常用指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="nav-text">函数调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%BF%E5%AD%90"><span class="nav-text">板子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%93%E9%94%99%E7%82%B9"><span class="nav-text">易错点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#P2%E6%95%99%E7%A8%8B"><span class="nav-text">P2教程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95"><span class="nav-text">矩阵乘法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9E%E6%96%87%E4%B8%B2%E5%88%A4%E6%96%AD"><span class="nav-text">回文串判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%B7%E7%A7%AF%E8%BF%90%E7%AE%97"><span class="nav-text">卷积运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E6%8E%92%E5%88%97"><span class="nav-text">全排列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%B7%E5%AE%AB"><span class="nav-text">迷宫</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-text">后记</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#P2%E4%B8%8A%E6%9C%BA%E5%8A%A0%E6%B2%B9%EF%BC%81%E5%86%B2%EF%BC%81"><span class="nav-text">P2上机加油！冲！</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#P2-Review"><span class="nav-text">P2_Review</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%B9%E9%85%8D%E5%AD%90%E4%B8%B2"><span class="nav-text">匹配子串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="nav-text">冒泡排序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#P2%E7%BB%93%E6%9D%9F%E5%95%A6%EF%BC%81%E5%86%8D%E6%8E%A5%E5%86%8D%E5%8E%89%EF%BC%81"><span class="nav-text">P2结束啦！再接再厉！</span></a></li></ol>
    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>



        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;<i class="fa-solid fa-heart icon-animate"></i>&nbsp;<a href="/">Coooookie. All Rights Reserved.</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalviews&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v0.4.5</a>
        </div>
        
        
        <script async data-pjax defer>
            function odometer_init(){
                    let el = document.getElementsByClassName('odometer');
                    for (i = 0; i < el.length; i++) {
                        od = new Odometer({
                            el: el[i],
                            format: '( ddd).dd',
                            duration: 200
                        });
                    }
            }
            odometer_init();
        </script>
        <div id="start_time_div" style="display:none">
            2022/12/27 00:00:00
        </div>
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fa-solid fa-magnifying-glass-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fa-solid fa-magnifying-glass-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fa-solid fa-left-right"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fa-solid fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fa-solid fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fa-solid fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fa-solid fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>




    
<script src="/js/runtime.js"></script>

    
<script src="/js/odometer.min.js"></script>

    
<link rel="stylesheet" href="/css/odometer-theme-minimal.css">



<div class="post-scripts pjax">
    
        
<script src="/js/toc-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            REDEFINE.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            REDEFINE.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            REDEFINE.refresh();
        });
    });
</script>



</body>
</html>
